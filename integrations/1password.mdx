---
title: "1Password"
description: "Securely inject 1Password secrets into your browser sessions"
icon: "plug"
---

## Overview

The 1Password integration allows you to securely inject secrets, credentials, and other sensitive data from your 1Password vaults directly into your Anchor Browser sessions. This eliminates the need to hardcode credentials in your automation scripts and provides a secure way to manage sensitive information.

## Prerequisites

Before you can use the 1Password integration, you need:

1. **1Password Account**: An active 1Password account with access to the secrets you want to use in a vault different than "Personal"
2. **Anchor Browser API Key**: Your Anchor Browser API key for authentication

## Getting a 1Password Service Account Token

1. Log in to your [1Password account](https://my.1password.com/)
2. Navigate to **Developer** → **Directory** → **Service Account**
3. Click **Create Service Account**
4. Give your service account a descriptive name (e.g., "Anchor Browser Automation")
5. Grant the service account access to the vaults containing the secrets you need
6. Copy the service account token (starts with `ops_`) - you'll need this for the integration setup

<Warning>
  Store your service account token securely. It provides access to your
  1Password secrets and should be treated like a password.
</Warning>

## Creating a 1Password Integration



Create a 1Password integration using the AnchorBrowser SDK:

<CodeGroup>
```javascript node.js
import AnchorClient from "anchorbrowser";

(async () => {
  const client = new AnchorClient({
    apiKey: process.env.ANCHOR_API_KEY,
  });

  const integration = await client.integrations.create({
    name: "My 1Password Integration",
    type: "1PASSWORD",
    credentials: {
      type: "serviceAccount",
      data: {
        serviceAccount: process.env.OP_SERVICE_ACCOUNT_TOKEN
      }
    }
  });

  console.log("Integration created:", integration.data);
  // Save the integration ID for use in sessions
  const integrationId = integration.data.integration.id;
})();
```

```python python
import os
from anchorbrowser import Anchorbrowser

client = Anchorbrowser(api_key=os.getenv("ANCHOR_API_KEY"))

integration = client.integrations.create(
    name="My 1Password Integration",
    type="1PASSWORD",
    credentials={
        "type": "serviceAccount",
        "data": {
            "serviceAccount": os.getenv("OP_SERVICE_ACCOUNT_TOKEN")
        }
    }
)

print("Integration created:", integration.data)
# Save the integration ID for use in sessions
integration_id = integration.data.integration.id
```
</CodeGroup>

Save the `id` from the response - you'll need it to use the integration in browser sessions.

## Using 1Password Integration in Browser Sessions

Once you've created a 1Password integration, you can use it in your browser sessions to automatically load secrets.

### Load All Secrets

Load all secrets from your 1Password vaults:

<CodeGroup>
```javascript node.js
import AnchorClient from "anchorbrowser";

(async () => {
  const client = new AnchorClient({
    apiKey: process.env.ANCHOR_API_KEY,
  });

  const session = await client.sessions.create({
    integrations: [
      {
        id: integrationId,
        type: "1PASSWORD",
        configuration: {
          load_mode: "all"
        }
      }
    ]
  });

  console.log("Session created with 1Password integration:", session.data);
})();
```
```python python
import os
from anchorbrowser import Anchorbrowser

client = Anchorbrowser(api_key=os.getenv("ANCHOR_API_KEY"))

session = client.sessions.create(
    integrations=[
        {
            "id": integration_id,
            "type": "1PASSWORD",
            "configuration": {
                "load_mode": "all"
            }
        }
    ]
)

print("Session created with 1Password integration:", session.data)
```
</CodeGroup>

### Load Specific Secrets

Load only specific secrets using 1Password secret references:

<CodeGroup>
```javascript node.js
import AnchorClient from "anchorbrowser";

(async () => {
  const client = new AnchorClient({
    apiKey: process.env.ANCHOR_API_KEY,
  });

  const session = await client.sessions.create({
    integrations: [
      {
        id: integrationId,
        type: "1PASSWORD",
        configuration: {
          load_mode: "specific",
          secrets: [
            "op://Production/Database/username",
            "op://Production/Database/password",
            "op://Production/API Keys/stripe_key"
          ]
        }
      }
    ]
  });

  console.log("Session created with specific secrets:", session.data);
})();
```

```python python
import os
from anchorbrowser import Anchorbrowser

client = Anchorbrowser(api_key=os.getenv("ANCHOR_API_KEY"))

session = client.sessions.create(
    integrations=[
        {
            "id": integration_id,
            "type": "1PASSWORD",
            "configuration": {
                "load_mode": "specific",
                "secrets": [
                    "op://Production/Database/username",
                    "op://Production/Database/password",
                    "op://Production/API Keys/stripe_key"
                ]
            }
        }
    ]
)

print("Session created with specific secrets:", session.data)
```
</CodeGroup>

## 1Password Secret Reference Format

1Password uses a specific format for secret references:

```
op://[vault]/[item]/[field]
```

- **vault**: The name of your 1Password vault
- **item**: The name of the item in the vault
- **field**: The specific field within the item

### Examples

```
op://Production/AWS Credentials/access_key_id
op://Development/GitHub/personal_access_token
op://Shared/Stripe/api_key
```

## Accessing Secrets in Your Browser Session

Once loaded, secrets are available as environment variables in your browser session. The environment variable name is derived from the secret reference:

- Secret reference: `op://Production/Database/username`
- Environment variable: `OP_PRODUCTION_DATABASE_USERNAME`

The conversion follows these rules:

1. Remove the `op://` prefix
2. Replace `/` with `_`
3. Convert to uppercase
4. Prefix with `OP_`

### Example: Using Secrets in Automation

<CodeGroup>
```javascript node.js
import AnchorClient from "anchorbrowser";

(async () => {
  // Create a session with 1Password integration
  const client = new AnchorClient({
    apiKey: process.env.ANCHOR_API_KEY,
  });

  const session = await client.sessions.create({
    integrations: [
      {
        id: integrationId,
        type: "1PASSWORD",
        configuration: {
          load_mode: "specific",
          secrets: ["op://Production/Database/username", "op://Production/Database/password"]
        }
      }
    ]
  });

  // Access the secrets in your automation code
  // The secrets are automatically available as environment variables
  // OP_PRODUCTION_DATABASE_USERNAME and OP_PRODUCTION_DATABASE_PASSWORD
})();
```
```python python
import os
from anchorbrowser import AnchorBrowser

# Create a session with 1Password integration
client = AnchorBrowser(api_key="YOUR_API_KEY")

session = client.sessions.create(
    integrations=[
        {
            "id": integration_id,
            "type": "1PASSWORD",
            "configuration": {
                "load_mode": "specific",
                "secrets": ["op://Production/Database/username", "op://Production/Database/password"]
            }
        }
    ]
)

# Access the secrets in your automation code
# The secrets are automatically available as environment variables
# OP_PRODUCTION_DATABASE_USERNAME and OP_PRODUCTION_DATABASE_PASSWORD
```
</CodeGroup>

## Managing Integrations

### List All Integrations

<CodeGroup>
```javascript node.js
import AnchorClient from "anchorbrowser";

(async () => {
  const client = new AnchorClient({
    apiKey: process.env.ANCHOR_API_KEY,
  });

  const integrations = await client.integrations.list();
  
  console.log("Available integrations:", integrations.data.integrations);
  
  // Find a specific integration by name
  const onePasswordIntegration = integrations.data.integrations.find(
    integration => integration.type === "1PASSWORD"
  );
  
  if (onePasswordIntegration) {
    console.log("1Password integration ID:", onePasswordIntegration.id);
  }
})();
```

```python python
import os
from anchorbrowser import Anchorbrowser

client = Anchorbrowser(api_key=os.getenv("ANCHOR_API_KEY"))

integrations = client.integrations.list()

print("Available integrations:", integrations.data.integrations)

# Find a specific integration by name
one_password_integration = next(
    (integration for integration in integrations.data.integrations 
     if integration.type == "1PASSWORD"), 
    None
)

if one_password_integration:
    print("1Password integration ID:", one_password_integration.id)
```
</CodeGroup>

### Delete an Integration

<CodeGroup>
```javascript node.js
import AnchorClient from "anchorbrowser";

(async () => {
  const client = new AnchorClient({
    apiKey: process.env.ANCHOR_API_KEY,
  });

  const integrationId = "550e8400-e29b-41d4-a716-446655440000";
  
  const result = await client.integrations.delete(integrationId);
  
  console.log("Integration deleted:", result.data);
  console.log("Deleted:", result.data.integration.deleted);
})();
```

```python python
import os
from anchorbrowser import Anchorbrowser

client = Anchorbrowser(api_key=os.getenv("ANCHOR_API_KEY"))

integration_id = "550e8400-e29b-41d4-a716-446655440000"

result = client.integrations.delete(integration_id)

print("Integration deleted:", result.data)
print("Deleted:", result.data.integration.deleted)
```
</CodeGroup>

<Warning>
  Deleting an integration will remove the stored service account token. Any
  browser sessions using this integration will fail to load secrets.
</Warning>

## Troubleshooting

### Integration Creation Fails

- **Invalid Service Account Token**: Verify your token starts with `ops_` and is valid
- **Insufficient Permissions**: Ensure the service account has access to the required vaults

### Secrets Not Loading

- **Invalid Secret Reference**: Check the format of your secret references (`op://vault/item/field`)
- **Service Account Access**: Verify the service account has access to the specified vaults and items
- **Item or Field Not Found**: Ensure the vault, item, and field names are correct and exist

### Environment Variables Not Available

- **Check Secret Reference Format**: Ensure your secret references follow the correct format
- **Verify Integration ID**: Make sure you're using the correct integration ID in your session configuration

## Support

For additional help with 1Password integration:

- [1Password Service Accounts Documentation](https://developer.1password.com/docs/service-accounts/)
- Contact Anchor Browser support at support@anchorbrowser.io
