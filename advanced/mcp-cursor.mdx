---
title: "Cursor MCP"
---

## Anchor Browser MCP with Cursor

Using Anchor Browser MCP with Cursor allows you to create deterministic, reliable and high-quality automations, which are automatically generated by cursor code generation. Cursor will use cloud browser instances to iteratively build the automation and provide you a final working workflow you can use

## Why use Anchor Browser MCP with Cursor

### âœ… Compared to Browser-Use (e.g perform web task)

- Create highly reliable automations that will consistently perform the same operation
- Avoid latency caused by runtime usage of language models
- Reduce LLM related costs by using LLMs only at build time
- Better for highly repeating use-cases

### âœ… Compared to Playwright MCP

- Use fully hosted and scalable browsers setup
- Easily configure authenticated and login for the saas applications you want to automate
- Avoid getting blocked by bot detection mechanism

## Quick setup guide

1. Install the MCP server - Use the [Cursor setup example](https://docs.anchorbrowser.io/advanced/mcp#setup-in-cursor)
2. On your cursor console, provide a prompt describing the target task. Example would be:
```
   Generate Playwright code for the following scenario:
   1. Navigate to https://github.com/apache/airflow/stargazers?page=1
   2. extract the company each stargazer works in
   3. Repeat in a for loop for every person on the list
   3. For fully autonomous building, enable cursor to auto-run the generated code
```

<Expandable title="ðŸš€ Bonus: Enable Auto-Run for Uninterrupted Agent Operation">

For a fully autonomous experience where the agent builds your automation without interruptions, you can enable auto-run:

1. **Expand the Agent Panel**: Click on the agent dropdown in the top-left corner of Cursor
2. **Enable Auto-Run**: Toggle the "Auto-run" switch to enable automatic code execution

![Auto-run Configuration](/images/auto-run-cursor.png)

With auto-run enabled, the agent will:
- Call the Anchor tools without asking for permission every time
- Run the script iteratively until it succeeds
- Automatically fix errors and retry failed attempts
- Continue testing and refining until the automation works perfectly

This creates a completely hands-off experience where you simply describe your task and get a working automation script.

</Expandable>

3. Cursor agent will iteratively work on building your browser automation and will generate an output script

<Expandable title="View Generated Playwright Script">

```typescript
import { chromium } from 'playwright';

const apiKey = process.env["ANCHOR_API_KEY"];

interface StargazerData {
  username: string;
  company?: string;
  location?: string;
  joinDate?: string;
}

const browserConfiguration = {
  session: {
    timeout: {
      idle_timeout: 5,
      max_duration: 60,
    }
  }
};

// Get environment-specific configuration
process.env["NODE_TLS_REJECT_UNAUTHORIZED"] = "0";

async function createBrowserSession() {
  const response = await fetch(`https://api.anchorbrowser.io/v1/sessions`, {
    method: "POST",
    headers: {
      "anchor-api-key": apiKey,
      "Content-Type": "application/json",
    },
    body: JSON.stringify(browserConfiguration),
  });

  const json = await response.json();
  console.log('Browser session created:', json);
  return json.data;
}

async function extractStargazerData() {
  console.log('Starting extraction of stargazer company information...');
  
  // Create remote browser session
  const { id } = await createBrowserSession();
  const browser = await chromium.connectOverCDP(
    `wss://connect.anchorbrowser.io?sessionId=${id}`
  );
  const context = browser.contexts()[0];
  const page = context.pages()[0];
  
  try {
    // Navigate to the first page of stargazers
    console.log('Navigating to stargazers page...');
    await page.goto('https://github.com/apache/airflow/stargazers?page=1');
    
    // Wait for the page to load and specifically look for stargazers content
    console.log('Waiting for page to load...');
    await page.waitForLoadState('networkidle', { timeout: 60000 });
    
    // Wait for the main stargazers list to appear
    await page.waitForSelector('main ol', { timeout: 30000 });
    
    // Check if we're on the right page by looking for stargazers-specific content
    console.log('Verifying we are on the stargazers page...');
    const pageTitle = await page.title();
    console.log('Page title:', pageTitle);
    
    // Look for the stargazers heading more specifically
    const stargazersHeading = await page.locator('h1:has-text("Stargazers")').first();
    if (await stargazersHeading.count() === 0) {
      // Try alternative selectors
      const allH1s = await page.locator('h1').all();
      console.log('Found H1 elements:');
      for (let i = 0; i < allH1s.length; i++) {
        const text = await allH1s[i].textContent();
        console.log(`H1 ${i + 1}:`, text);
      }
      
      // Check if we can find any stargazer-related content
      const stargazerContent = await page.locator('text=stargazer').first();
      if (await stargazerContent.count() === 0) {
        throw new Error('Could not find stargazers page - no stargazer content found');
      }
    }
    
    const allStargazers: StargazerData[] = [];
    let currentPage = 1;
    const maxPages = 3; // Limiting to first 3 pages for demo purposes
    
    while (currentPage <= maxPages) {
      console.log(`\n--- Processing page ${currentPage} ---`);
      
      // Get all stargazer list items - try different selectors
      let stargazerItems = page.locator('main ol > li');
      let itemCount = await stargazerItems.count();
      
      // If no items found with main selector, try alternative selectors
      if (itemCount === 0) {
        console.log('No items found with main selector, trying alternatives...');
        stargazerItems = page.locator('ol > li');
        itemCount = await stargazerItems.count();
        
        if (itemCount === 0) {
          stargazerItems = page.locator('[data-testid="follow-list-item"]');
          itemCount = await stargazerItems.count();
        }
        
        if (itemCount === 0) {
          console.log('Could not find any stargazer items on this page');
          break;
        }
      }
      
      console.log(`Found ${itemCount} stargazers on page ${currentPage}`);
      
      // Extract data from each stargazer on this page
      for (let i = 0; i < itemCount; i++) {
        const item = stargazerItems.nth(i);
        
        // Extract username from the heading link - try multiple selectors
        let usernameElement = item.locator('h2 a');
        let username = await usernameElement.textContent();
        
        // If no username found with h2 a, try alternative selectors
        if (!username) {
          usernameElement = item.locator('a[data-hovercard-type="user"]');
          username = await usernameElement.textContent();
        }
        
        if (!username) {
          usernameElement = item.locator('h3 a, h4 a');
          username = await usernameElement.textContent();
        }
        
        if (!username) {
          console.log(`Could not extract username for item ${i}, skipping...`);
          continue;
        }
        
        const stargazerData: StargazerData = {
          username: username.trim()
        };
        
        // Look for company information (text containing "Works for")
        const companyElement = item.locator('text=/Works for/');
        if (await companyElement.count() > 0) {
          const companyContainer = companyElement.locator('..');
          const companyText = await companyContainer.textContent();
          if (companyText) {
            // Extract company name after "Works for "
            const companyMatch = companyText.match(/Works for (.+)/);
            if (companyMatch) {
              stargazerData.company = companyMatch[1].trim();
            }
          }
        }
        
        // Look for location information (text containing "Is from")
        const locationElement = item.locator('text=/Is from/');
        if (await locationElement.count() > 0) {
          const locationContainer = locationElement.locator('..');
          const locationText = await locationContainer.textContent();
          if (locationText) {
            // Extract location after "Is from "
            const locationMatch = locationText.match(/Is from (.+)/);
            if (locationMatch) {
              stargazerData.location = locationMatch[1].trim();
            }
          }
        }
        
        // Look for join date information (text containing "Joined on")
        const joinDateElement = item.locator('text=/Joined on/');
        if (await joinDateElement.count() > 0) {
          const joinDateText = await joinDateElement.textContent();
          if (joinDateText) {
            const joinMatch = joinDateText.match(/Joined on (.+)/);
            if (joinMatch) {
              stargazerData.joinDate = joinMatch[1].trim();
            }
          }
        }
        
        allStargazers.push(stargazerData);
        
        // Log the extracted data
        console.log(`${stargazerData.username}:`, {
          company: stargazerData.company || 'N/A',
          location: stargazerData.location || 'N/A',
          joinDate: stargazerData.joinDate || 'N/A'
        });
      }
      
      // Check if there's a "Next" button and navigate to next page
      let nextButton = page.locator('a:has-text("Next")');
      if (await nextButton.count() === 0) {
        // Try alternative selectors for the next button
        nextButton = page.locator('a[aria-label="Next"]');
      }
      if (await nextButton.count() === 0) {
        nextButton = page.locator('a:text-is("Next")');
      }
      
      if (currentPage < maxPages && await nextButton.count() > 0) {
        console.log('Clicking Next button...');
        await nextButton.click();
        
        // Wait for the page to load with a longer timeout
        await page.waitForLoadState('networkidle', { timeout: 30000 });
        
        // Add a small delay to ensure content is fully loaded
        await page.waitForTimeout(2000);
        
        currentPage++;
      } else {
        console.log('No Next button found or reached max pages');
        break;
      }
    }
    
    // Summary and validation
    console.log(`\n--- SUMMARY ---`);
    console.log(`Total stargazers processed: ${allStargazers.length}`);
    
    const stargazersWithCompanies = allStargazers.filter(s => s.company);
    console.log(`Stargazers with company information: ${stargazersWithCompanies.length}`);
    
    const stargazersWithLocations = allStargazers.filter(s => s.location);
    console.log(`Stargazers with location information: ${stargazersWithLocations.length}`);
    
    // Log all companies found
    if (stargazersWithCompanies.length > 0) {
      console.log('\n--- COMPANIES FOUND ---');
      stargazersWithCompanies.forEach(stargazer => {
        console.log(`${stargazer.username}: ${stargazer.company}`);
      });
    }
    
    // Basic validation
    if (allStargazers.length === 0) {
      console.error('ERROR: No stargazers were processed');
      return false;
    }
    
    if (stargazersWithCompanies.length === 0) {
      console.error('ERROR: No company information was found');
      return false;
    }
    
    // Verify we found some known companies from our manual testing
    const companyNames = stargazersWithCompanies.map(s => s.company);
    const hasExpectedCompanies = companyNames.some(company => 
      company?.includes('Samsung Electronics') || 
      company?.includes('Nankai University') ||
      company?.includes('Major 7 Apps')
    );
    
    if (hasExpectedCompanies) {
      console.log('SUCCESS: Found expected companies in the results');
    } else {
      console.log('WARNING: Did not find expected companies, but extraction still worked');
    }
    
    return true;
    
  } catch (error) {
    console.error('Error during extraction:', error);
    return false;
  } finally {
    await browser.close();
  }
}

// Run the script
extractStargazerData()
  .then(success => {
    if (success) {
      console.log('\nScript completed successfully!');
      process.exit(0);
    } else {
      console.log('\nScript completed with errors!');
      process.exit(1);
    }
  })
  .catch(error => {
    console.error('Unhandled error:', error);
    process.exit(1);
  }); 
```

</Expandable>

## That's it! 

You now have a complete, production-ready browser automation script that you can run reliably at scale. With Anchor Browser MCP and Cursor, you can:

- **Build complex automations quickly** - Cursor's AI generates the entire Playwright script for you
- **Scale with confidence** - Run your automations on hosted browsers without worrying about infrastructure
- **Avoid bot detection** - Use residential IPs and real browser environments 
- **Handle authentication seamlessly** - Configure login flows once and reuse across automations